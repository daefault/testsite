<!-- templates/cinema/ticket_detail.html -->
{% extends 'main/base.html' %}
{% load static %}

{% block title %}–ë–∏–ª–µ—Ç #{{ ticket.id }} - –ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä "–≠–∫—Ä–∞–Ω"{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow-lg">
            <div class="card-header bg-primary text-white text-center py-3">
                <h2 class="mb-0">–ö–ò–ù–û–¢–ï–ê–¢–† "–≠–ö–†–ê–ù"</h2>
                <p class="mb-0">–ë–ò–õ–ï–¢ –ù–ê –°–ï–ê–ù–°</p>
            </div>
            
            <div class="card-body">
                <!-- QR –∫–æ–¥ (–∑–∞–≥–ª—É—à–∫–∞) -->
                <div class="text-center mb-4">
                    <div class="border d-inline-block p-3">
                        <div style="width: 200px; height: 200px; background: #f8f9fa; display: flex; align-items: center; justify-content: center;">
                            <div class="text-center">
                                <div class="fs-1">üé´</div>
                                <small>QR –∫–æ–¥ –±–∏–ª–µ—Ç–∞</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ -->
                <div class="row mb-4">
                    <div class="col-4 text-end">
                        <strong>–§–∏–ª—å–º:</strong>
                    </div>
                    <div class="col-8">
                        <h5>{{ ticket.session.movie.name }}</h5>
                    </div>
                </div>
                
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ–∞–Ω—Å–µ -->
                <div class="row mb-2">
                    <div class="col-4 text-end">
                        <strong>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:</strong>
                    </div>
                    <div class="col-8">
                        {{ ticket.session.date_session }} {{ ticket.session.start_time|time:"H:i" }}
                    </div>
                </div>
                
                <div class="row mb-2">
                    <div class="col-4 text-end">
                        <strong>–ó–∞–ª:</strong>
                    </div>
                    <div class="col-8">
                        –ó–∞–ª {{ ticket.session.cinema_hall.id }} ({{ ticket.session.cinema_hall.hall_type.hall_type }})
                    </div>
                </div>
                
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–µ -->
                <div class="row mb-2">
                    <div class="col-4 text-end">
                        <strong>–ú–µ—Å—Ç–æ:</strong>
                    </div>
                    <div class="col-8">
                        –†—è–¥ {{ ticket.seat.row }}, –ú–µ—Å—Ç–æ {{ ticket.seat.seat_in_row }}
                    </div>
                </div>
                
                <!-- –¶–µ–Ω–∞ -->
                <div class="row mb-4">
                    <div class="col-4 text-end">
                        <strong>–¶–µ–Ω–∞:</strong>
                    </div>
                    <div class="col-8">
                        <h4 class="text-success">{{ ticket.session.price }} ‚ÇΩ</h4>
                    </div>
                </div>
                
                <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div class="row mb-4">
                    <div class="col-4 text-end">
                        <strong>–°—Ç–∞—Ç—É—Å:</strong>
                    </div>
                    <div class="col-8">
                        <span class="badge {% if ticket.status %}bg-success{% else %}bg-warning{% endif %} fs-6">
                            {% if ticket.status %}–ò–°–ü–û–õ–¨–ó–û–í–ê–ù{% else %}–ê–ö–¢–ò–í–ï–ù{% endif %}
                        </span>
                    </div>
                </div>
                
                {% if ticket.buy_date %}
                <div class="row mb-2">
                    <div class="col-4 text-end">
                        <strong>–î–∞—Ç–∞ –ø–æ–∫—É–ø–∫–∏:</strong>
                    </div>
                    <div class="col-8">
                        {{ ticket.buy_date }}
                    </div>
                </div>
                {% endif %}
                
                <div class="row">
                    <div class="col-4 text-end">
                        <strong>–ù–æ–º–µ—Ä –±–∏–ª–µ—Ç–∞:</strong>
                    </div>
                    <div class="col-8">
                        <code>#{{ ticket.id }}-{{ ticket.session.id }}-{{ ticket.seat.id }}</code>
                    </div>
                </div>
                
                <hr class="my-4">
                
                <!-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ -->
                <div class="alert alert-warning">
                    <h6><i class="bi bi-exclamation-triangle"></i> –í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h6>
                    <ul class="mb-0 small">
                        <li>–ë–∏–ª–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥—ä—è–≤–∏—Ç—å –Ω–∞ –≤—Ö–æ–¥–µ –≤ –∑–∞–ª</li>
                        <li>–ë–∏–ª–µ—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Å–µ–∞–Ω—Å</li>
                        <li>–í–æ–∑–≤—Ä–∞—Ç –±–∏–ª–µ—Ç–æ–≤ –≤–æ–∑–º–æ–∂–µ–Ω –Ω–µ –ø–æ–∑–¥–Ω–µ–µ —á–µ–º –∑–∞ 1 —á–∞—Å –¥–æ —Å–µ–∞–Ω—Å–∞</li>
                    </ul>
                </div>
                
                <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                <div class="text-center mt-4">
                    <button onclick="window.print()" class="btn btn-primary me-2">
                        <i class="bi bi-printer"></i> –†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å
                    </button>
                    <a href="{% url 'main:my_tickets' %}" class="btn btn-outline-secondary">
                        –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –±–∏–ª–µ—Ç–æ–≤
                    </a>
                </div>
            </div>
            
            <div class="card-footer text-center text-muted small">
                <p class="mb-0">–ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä "–≠–∫—Ä–∞–Ω" ‚Ä¢ info@cinema.ru ‚Ä¢ —Ç–µ–ª. +7 (XXX) XXX-XX-XX</p>
                <p class="mb-0">–ë–∏–ª–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω: {% now "d.m.Y H:i" %}</p>
            </div>
        </div>
    </div>
</div>

<style>
@media print {
    .navbar, .footer, .btn {
        display: none !important;
    }
    .card {
        border: 2px solid #000 !important;
        box-shadow: none !important;
    }
}
</style>
{% endblock %}